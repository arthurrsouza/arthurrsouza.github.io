{"version":3,"file":"main-DpAds4Fv.js","sources":["../../web-component.ts"],"sourcesContent":["/**\n * Minimal CommonJS shims for ember-repl when running inside the standalone\n * web component build.\n *\n * ember-repl transpiles GJS snippets to CommonJS and expects `exports`,\n * `module.exports` and sometimes `require` to be available at runtime. In the\n * Vite-bundled standalone app, ember-repl's internal `exports` binding is\n * renamed during bundling, so the generated code ends up writing to the global\n * `exports` instead.\n *\n * To keep things working we:\n *   - provide `window.exports` / `window.module.exports` so the compiled code\n *     has somewhere to write to; and\n *   - provide a very small `window.require` stub so ember-repl can fall back\n *     to it for modules that are not part of its built-in map.\n *\n * The actual component instance is wired up in the extension-handler service,\n * which reads from `window.exports` when ember-repl does not return a\n * component directly.\n */\nif (typeof window !== 'undefined') {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error - augmenting the global window object\n  const win: any = window;\n\n  if (typeof win.require !== 'function') {\n    win.require = (moduleName: string) => {\n      // This path is only hit when ember-repl cannot resolve a module from its\n      // own `known-modules` map or the provided importMap.\n      // eslint-disable-next-line no-console\n      console.warn(\n        `[web-component] window.require called for module: ${moduleName}`\n      );\n      throw new Error(\n        `Module not found: ${moduleName}. Please add it to the importMap.`\n      );\n    };\n  }\n\n  if (!win.exports) {\n    win.exports = {};\n  }\n\n  if (!win.module) {\n    win.module = { exports: win.exports };\n  }\n}\n\nimport type Application from '@ember/application';\nimport App from './app/app';\nimport config from 'standalone-app/config/environment';\n\nexport interface WrapAppOptions {\n  tagName?: string;\n  styles?: string;\n  rootElementTag?: string;\n  appConfig?: unknown;\n}\n\nexport function wrapApp(\n  App: typeof Application,\n  options: WrapAppOptions = {}\n): typeof HTMLElement {\n  class WrappedAppElement extends HTMLElement {\n    connectedCallback() {\n      const shadow = this.attachShadow({ mode: 'open' });\n\n      /**\n       * We originally defaulted to body here because we were testing with the ember-welcome-page and it\n       * had specific css targeting the body. The more we experimented and thought about it we thought\n       * it was a decent thing for an application wrapped in a web-component to have it's own body,\n       * and nobody seemed to be telling us it was a bad idea so ðŸ¤·\n       */\n      const rootElement = document.createElement(\n        options.rootElementTag ?? 'body'\n      );\n\n      if (options.styles) {\n        const style = document.createElement('style');\n        style.textContent = options.styles;\n        shadow.appendChild(style);\n      }\n\n      const appConfig = {\n        ...(options.appConfig ?? {}),\n        rootElement,\n      };\n      App.create(appConfig);\n\n      shadow.append(rootElement);\n    }\n  }\n\n  if (options.tagName) {\n    customElements.define(options.tagName, WrappedAppElement);\n  }\n\n  return WrappedAppElement;\n}\n\nimport styles from './app/styles/app.css?inline';\n\nexport default wrapApp(App, {\n  tagName: 'app-webcomponent',\n  styles,\n  appConfig: config.APP,\n});\n"],"names":["window","win","require","moduleName","console","warn","Error","exports","module","App","options","WrappedAppElement","HTMLElement","connectedCallback","shadow","this","attachShadow","mode","rootElement","document","createElement","rootElementTag","styles","style","textContent","appendChild","appConfig","create","append","tagName","customElements","define","wrapApp","config","APP"],"mappings":"6CAoBA,GAAsB,oBAAXA,OAAwB,CAGjC,MAAMC,EAAWD,OAEU,mBAAhBC,EAAIC,UACbD,EAAIC,QAAWC,IAOb,MAHAC,QAAQC,KACN,qDAAqDF,KAEjD,IAAIG,MACR,qBAAqBH,qCACtB,GAIAF,EAAIM,UACPN,EAAIM,QAAU,CAAA,GAGXN,EAAIO,SACPP,EAAIO,OAAS,CAAED,QAASN,EAAIM,SAEhC,EAaO,SACLE,EACAC,EAA0B,IAE1B,MAAMC,UAA0BC,YAC9BC,iBAAAA,GACE,MAAMC,EAASC,KAAKC,aAAa,CAAEC,KAAM,SAQnCC,EAAcC,SAASC,cAC3BV,EAAQW,gBAAkB,QAG5B,GAAIX,EAAQY,OAAQ,CAClB,MAAMC,EAAQJ,SAASC,cAAc,SACrCG,EAAMC,YAAcd,EAAQY,OAC5BR,EAAOW,YAAYF,EACrB,CAEA,MAAMG,EAAY,IACZhB,EAAQgB,WAAa,GACzBR,eAEFT,EAAIkB,OAAOD,GAEXZ,EAAOc,OAAOV,EAChB,EAGER,EAAQmB,SACVC,eAAeC,OAAOrB,EAAQmB,QAASlB,EAI3C,CAIeqB,CAAQvB,EAAK,CAC1BoB,QAAS,mBACTP,m1DACAI,UAAWO,EAAOC"}