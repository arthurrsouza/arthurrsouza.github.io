{"version":3,"file":"web-component.js","sources":["../web-component.ts"],"sourcesContent":["import type Application from '@ember/application';\nimport App from './app/app';\nimport config from 'standalone-app/config/environment';\n\nexport interface WrapAppOptions {\n  tagName?: string;\n  styles?: string;\n  rootElementTag?: string;\n  appConfig?: unknown;\n}\n\nexport function wrapApp(\n  App: typeof Application,\n  options: WrapAppOptions = {}\n): typeof HTMLElement {\n  class WrappedAppElement extends HTMLElement {\n    connectedCallback() {\n      const shadow = this.attachShadow({ mode: 'open' });\n\n      /**\n       * We originally defaulted to body here because we were testing with the ember-welcome-page and it\n       * had specific css targeting the body. The more we experimented and thought about it we thought\n       * it was a decent thing for an application wrapped in a web-component to have it's own body,\n       * and nobody seemed to be telling us it was a bad idea so ðŸ¤·\n       */\n      const rootElement = document.createElement(\n        options.rootElementTag ?? 'body'\n      );\n\n      if (options.styles) {\n        const style = document.createElement('style');\n        style.textContent = options.styles;\n        shadow.appendChild(style);\n      }\n\n      const appConfig = {\n        ...(options.appConfig ?? {}),\n        rootElement,\n      };\n      App.create(appConfig);\n\n      shadow.append(rootElement);\n    }\n  }\n\n  if (options.tagName) {\n    customElements.define(options.tagName, WrappedAppElement);\n  }\n\n  return WrappedAppElement;\n}\n\nimport styles from './app/styles/app.css?inline';\n\nexport default wrapApp(App, {\n  tagName: 'app-webcomponent',\n  styles,\n  appConfig: config.APP,\n});\n"],"names":["wrapApp","App","options","WrappedAppElement","HTMLElement","connectedCallback","shadow","attachShadow","mode","rootElement","document","createElement","rootElementTag","styles","style","textContent","appendChild","appConfig","create","append","tagName","customElements","define","config","APP"],"mappings":";;;;AAWO,SAASA,OAAOA,CACrBC,GAAuB,EACvBC,OAAuB,GAAG,EAAE,EACR;EACpB,MAAMC,iBAAiB,SAASC,WAAW,CAAC;AAC1CC,IAAAA,iBAAiBA,GAAG;AAClB,MAAA,MAAMC,MAAM,GAAG,IAAI,CAACC,YAAY,CAAC;AAAEC,QAAAA,IAAI,EAAE;AAAO,OAAC,CAAC;;AAElD;AACN;AACA;AACA;AACA;AACA;MACM,MAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAa,CACxCT,OAAO,CAACU,cAAc,IAAI,MAC5B,CAAC;MAED,IAAIV,OAAO,CAACW,MAAM,EAAE;AAClB,QAAA,MAAMC,KAAK,GAAGJ,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;AAC7CG,QAAAA,KAAK,CAACC,WAAW,GAAGb,OAAO,CAACW,MAAM;AAClCP,QAAAA,MAAM,CAACU,WAAW,CAACF,KAAK,CAAC;AAC3B,MAAA;AAEA,MAAA,MAAMG,SAAS,GAAG;AAChB,QAAA,IAAIf,OAAO,CAACe,SAAS,IAAI,EAAE,CAAC;AAC5BR,QAAAA;OACD;AACDR,MAAAA,GAAG,CAACiB,MAAM,CAACD,SAAS,CAAC;AAErBX,MAAAA,MAAM,CAACa,MAAM,CAACV,WAAW,CAAC;AAC5B,IAAA;AACF;EAEA,IAAIP,OAAO,CAACkB,OAAO,EAAE;IACnBC,cAAc,CAACC,MAAM,CAACpB,OAAO,CAACkB,OAAO,EAAEjB,iBAAiB,CAAC;AAC3D,EAAA;AAEA,EAAA,OAAOA,iBAAiB;AAC1B;AAIeH,OAAO,CAACC,GAAG,EAAE;AAC1BmB,EAAAA,OAAO,EAAE,kBAAkB;EAC3BP,MAAM;EACNI,SAAS,EAAEM,MAAM,CAACC;AACpB,CAAC,CAAC"}